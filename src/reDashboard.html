<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <title>fantasy.dashboard</title>
      <link rel="stylesheet" href="reDashboard.css">
      <!-- Syntax Highlighting -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/lua.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
      
      <!-- Chart.js for XP History -->
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
      <!-- Constelia Dashboard JavaScript Modules -->
      <script src="js/core.js"></script>        <!-- Foundation & API -->
      <script src="js/modules.js"></script>     <!-- Feature modules -->
      <script src="js/components.js"></script>  <!-- UI components -->
      <script src="js/utils.js"></script>       <!-- Utilities & advanced features -->
      <script src="js/main.js"></script>        <!-- Initialization & orchestration -->
  </head>
  <body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen" style="display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #1a1a1a; z-index: 9999; align-items: center; justify-content: center; flex-direction: column;">
      <div style="text-align: center;">
        <div class="loading-spinner" style="width: 60px; height: 60px; border: 4px solid rgba(74, 158, 255, 0.3); border-top: 4px solid #4a9eff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
        <h2 style="color: #4a9eff; margin-bottom: 10px;">Loading Dashboard...</h2>
        <p style="color: #aaa;">Connecting to Constelia servers</p>
      </div>
    </div>
    
    <div class="container" id="mainInterface" style="display: none;">
      <!-- Header -->
      <div class="header">
        <!-- Header buttons in top-right corner -->
        <div class="header-buttons">
          <div style="position: relative;">
            <button class="omega-button" id="omegaButton" onclick="app.showOmegaModal()"> ğŸ’¾ Download Omega </button>
            <div class="omega-info" id="omegaInfo"> Latest Version â€¢ Last Updated: Recently </div>
          </div>
          <button class="roll-button" id="rollButton" onclick="app.rollLoot()"> ğŸ² Roll Loot </button>
          <button class="settings-button" id="settingsButton" onclick="app.showSettingsModal()"> âš™ï¸ Settings </button>
        </div>
        <h1> fantasy.dashboard <span class="version-badge">v6.0.2</span>
        </h1>
        <div class="login-section" id="loginSection">
          <input type="password" class="api-key-input" id="apiKey" placeholder="Enter your Constelia API key...">
          <button class="btn" onclick="app.connect()">ğŸš€ Connect</button>
          <button class="btn btn-small" onclick="app.toggleAdvanced()" style="margin-left: 10px; background: linear-gradient(135deg, #666, #555);">âš™ï¸ Advanced</button>
        </div>
        <!-- Advanced Login Section -->
        <div class="advanced-login" id="advancedLogin" style="display: none; margin-top: 15px; padding: 20px; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px;">
          <h3 style="color: #4a9eff; margin-bottom: 15px; font-size: 16px;">ğŸ”§ Advanced Login</h3>
          <p style="color: #aaa; font-size: 14px; margin-bottom: 15px;"> If you already have a handshake token, you can enter it directly below to skip the authorization step. </p>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="password" class="api-key-input" id="handshakeToken" placeholder="Enter handshake token directly..." style="flex: 1;">
            <button class="btn" onclick="app.connectWithHandshake()">ğŸ”‘ Connect with Token</button>
          </div>
          <div style="margin-top: 10px; font-size: 12px; color: #888;"> âš ï¸ <strong>Note:</strong> Handshake tokens are browser and IP-locked. Only use tokens generated on this device. </div>
          <!-- Add handshake management section -->
          <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
            <h4 style="color: #ff8c00; margin-bottom: 10px; font-size: 14px;">ğŸ—‘ï¸ Session Management</h4>
            <p style="color: #aaa; font-size: 13px; margin-bottom: 15px; line-height: 1.4;"> If you're having session issues or want to force logout from all devices, you can wipe your handshake token. <strong>This requires your license key and will log you out from all devices.</strong>
            </p>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="password" class="api-key-input" id="wipeHandshakeKey" placeholder="Enter license key to wipe handshake..." style="flex: 1;">
              <button class="btn btn-danger" onclick="app.wipeHandshake()" style="background: linear-gradient(135deg, #ff4444, #cc0000); white-space: nowrap;"> ğŸ—‘ï¸ Wipe Handshake </button>
            </div>
            <div style="margin-top: 8px; font-size: 11px; color: #ff8c00;"> âš ï¸ This will destroy your session token and log you out from all devices immediately. </div>
          </div>
          <!-- Remember Me Option -->
          <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
            <h4 style="color: #4a9eff; margin-bottom: 10px; font-size: 14px;">ğŸ” Session Preferences</h4>
            <div style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="rememberMe" style="width: 18px; height: 18px;" checked>
              <label for="rememberMe" style="color: #ccc; font-size: 14px; cursor: pointer;">Remember me (save session for 30 days)</label>
            </div>
            <div style="margin-top: 8px; font-size: 12px; color: #888;">
              When enabled, your session will be saved for 30 days. Disable this if you're using a shared computer.
            </div>
          </div>
        </div>
        <div class="connected-info" id="connectedInfo">
          <div class="user-avatar" id="userAvatar">?</div>
          <div>
            <div style="font-weight: 600; color: #fff;" id="connectedUsername">Connected</div>
            <div style="font-size: 14px; color: #aaa;">Level <span id="userLevel">0</span> â€¢ <span id="userXP">0</span> XP </div>
          </div>
          <button class="btn btn-danger btn-small" onclick="app.disconnect()">Disconnect</button>
        </div>
      </div>
      <!-- Navigation -->
      <div class="nav-tabs" id="navTabs">
        <button class="nav-tab active" onclick="app.switchTab('overview')">ğŸ“Š Overview</button>
        <button class="nav-tab" onclick="app.switchTab('scripts')">ğŸ“œ Scripts</button>
        <button class="nav-tab" onclick="app.switchTab('builds')">ğŸ—ï¸ Builds</button>
        <button class="nav-tab" onclick="app.switchTab('sessions')">ğŸ” Sessions</button>
        <button class="nav-tab" onclick="app.switchTab('perks')">âœ¨ Perks</button>
        <button class="nav-tab" onclick="app.switchTab('achievements')">ğŸ´ Achievements</button>
        <button class="nav-tab" onclick="app.switchTab('quests')">ğŸ¯ Quests</button>
        <button class="nav-tab" onclick="app.switchTab('divinity')">ğŸ† Leaderboard</button>
        <button class="nav-tab" onclick="app.switchTab('config')">âš™ï¸ Configuration</button>
      </div>
      <!-- Content Area -->
      <div class="content-area" id="contentArea">
        <!-- Overview Section -->
        <div class="content-section active" id="overview-section">
          <div class="card">
            <h2>ğŸ‘¤ Member Information</h2>
            <div class="stats-grid" id="memberStats">
              <div class="spinner"></div>
            </div>
          </div>
          <div class="card" id="rankProgressCard" style="display: none;">
            <h2>ğŸŒŸ Rank</h2>
            <div class="rank-display">
              <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                <div class="rank-badge" id="currentRankBadge">
                  <span class="rank-icon" id="rankIcon">ğŸŒŸ</span>
                  <span class="rank-name" id="rankName">Loading...</span>
                </div>
                <div style="flex: 1;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #aaa; font-size: 14px;">Progress to <span id="nextRankName" style="color: #4a9eff;">Next Rank</span></span>
                    <span style="color: #fff; font-size: 14px;"><span id="rankProgressPercent">0</span>%</span>
                  </div>
                  <div class="rank-progress-bar">
                    <div class="rank-progress-fill" id="rankProgressFill" style="width: 0%;"></div>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                    <span style="color: #888; font-size: 12px;"><span id="currentRankXP">0</span> XP</span>
                    <span style="color: #888; font-size: 12px;"><span id="xpNeeded">0</span> XP needed</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ“ˆ XP History <span id="mathematicianBonus" style="font-size: 16px; color: #8a2be2; font-weight: normal; display: none;"></span></h2>
            <div id="xpHistoryContainer" style="position: relative; min-height: 300px;">
              <canvas id="xpHistoryChart" style="max-height: 300px;"></canvas>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ’» Member's Panel Terminal</h2>
            <div class="terminal-container">
              <div class="terminal-header">
                <div class="terminal-controls">
                  <div class="terminal-dot" style="background: #ff5f57;"></div>
                  <div class="terminal-dot" style="background: #ffbd2e;"></div>
                  <div class="terminal-dot" style="background: #28ca42;"></div>
                </div>
                <div class="terminal-title" id="terminalTitle">Constelia Terminal</div>
              </div>
              <div class="terminal-body">
                <div class="terminal-output" id="terminalOutput">
                  <div class="terminal-welcome" id="terminalWelcome">
                    <div style="color: #4a9eff; font-weight: bold;">Constelia Member's Panel Terminal</div>
                    <div style="color: #888; font-size: 14px;">Type 'help' for available commands</div>
                  </div>
                </div>
                <div class="terminal-input-line">
                  <span class="terminal-prompt" id="terminalPrompt">fc2@constelia:~$</span>
                  <input type="text" class="terminal-input" id="terminalInput" placeholder="Enter command..." autocomplete="off">
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Scripts Section -->
        <div class="content-section" id="scripts-section">
          <div class="card">
            <h2>ğŸš€ My Active Scripts</h2>
            <div class="filter-controls">
              <label style="color: #aaa; font-size: 14px;">Sort by:</label>
              <select class="form-select" id="myScriptSort" style="width: 175px;" onchange="app.sortMyScripts()">
                <option value="name">Name (A-Z)</option>
                <option value="name_desc">Name (Z-A)</option>
                <option value="author">Author</option>
                <option value="updated" selected>Recently Updated</option>
                <option value="software">Software</option>
              </select>
              <button class="btn btn-small" onclick="app.refreshScripts()">ğŸ”„ Refresh</button>
            </div>
            <div class="scripts-grid" id="myScriptsGrid">
              <div class="spinner"></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ“š Available Scripts</h2>
            <div class="filter-controls">
              <input type="text" class="form-input" id="scriptSearch" placeholder="Search scripts..." onkeyup="app.filterScripts()" style="width: 300px;">
              <label style="color: #aaa; font-size: 14px;">Sort by:</label>
              <select class="form-select" id="availableScriptSort" style="width: 175px;" onchange="app.handleAvailableSortChange()">
                <option value="name">Name (A-Z)</option>
                <option value="name_desc">Name (Z-A)</option>
                <option value="author">Author</option>
                <option value="updated" selected>Recently Updated</option>
                <option value="software">Software</option>
                <option value="categories">Categories</option>
              </select>
              <button class="btn btn-small" onclick="app.clearAvailableFilters()">ğŸ—‘ï¸ Clear Filters</button>
            </div>
            <!-- Filter Panels -->
            <div id="availableAuthorFilter" class="filter-panel">
              <h4 style="color: #4a9eff; margin-bottom: 15px;">Filter by Author:</h4>
              <div id="authorFilters"></div>
            </div>
            <div id="availableSoftwareFilter" class="filter-panel">
              <h4 style="color: #4a9eff; margin-bottom: 15px;">Filter by Software:</h4>
              <div id="softwareFilters"></div>
            </div>
            <div id="availableCategoryFilter" class="filter-panel">
              <h4 style="color: #4a9eff; margin-bottom: 15px;">Filter by Category:</h4>
              <div id="categoryFilters"></div>
            </div>
            <div class="scripts-grid" id="availableScriptsGrid">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Builds Section -->
        <div class="content-section" id="builds-section">
          <div class="card">
            <h2>ğŸš€ My Builds</h2>
            <div class="filter-controls">
              <label style="color: #aaa; font-size: 14px;">Sort by:</label>
              <select class="form-select" id="myBuildSort" style="width: 175px;" onchange="app.sortMyBuilds()">
                <option value="tag">Tag (A-Z)</option>
                <option value="tag_desc">Tag (Z-A)</option>
                <option value="popularity" selected>Popularity</option>
              </select>
              <button class="btn" onclick="app.createBuild()">ğŸ—ï¸ Create New Build</button>
              <button class="btn btn-small" onclick="app.refreshBuilds()">ğŸ”„ Refresh</button>
            </div>
            <div class="scripts-grid" id="myBuildsGrid">
              <div class="spinner"></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ“¦ Available Builds</h2>
            <div class="filter-controls">
              <input type="text" class="form-input" id="buildSearch" placeholder="Search builds..." onkeyup="app.filterBuilds()" style="width: 300px;">
              <label style="color: #aaa; font-size: 14px;">Sort by:</label>
              <select class="form-select" id="availableBuildSort" style="width: 175px;" onchange="app.handleAvailableBuildSortChange()">
                <option value="tag">Tag (A-Z)</option>
                <option value="tag_desc">Tag (Z-A)</option>
                <option value="author">Author</option>
                <option value="popularity" selected>Popularity</option>
              </select>
              <button class="btn btn-small" onclick="app.clearAvailableBuildFilters()">ğŸ—‘ï¸ Clear Filters</button>
            </div>
            <!-- Filter Panels for Builds -->
            <div id="availableBuildAuthorFilter" class="filter-panel">
              <h4 style="color: #4a9eff; margin-bottom: 15px;">Filter by Author:</h4>
              <div id="buildAuthorFilters"></div>
            </div>
            <div class="scripts-grid" id="availableBuildsGrid">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Sessions Section -->
        <div class="content-section" id="sessions-section">
          <div class="card">
            <h2>ğŸ” Current Session Information</h2>
            <div id="currentSessionInfo">
              <div class="spinner"></div>
            </div>
          </div>
          
          <div class="card">
            <h2>ğŸ“Š Session Statistics</h2>
            <div class="stats-grid" id="sessionStats">
              <div class="spinner"></div>
            </div>
          </div>
          
          <div class="card">
            <h2>ğŸ“ˆ Session History</h2>
            <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
              <button class="btn" onclick="app.refreshSessionHistory()">ğŸ”„ Refresh History</button>
            </div>
            <div id="sessionHistoryContainer">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Perks Section -->
        <div class="content-section" id="perks-section">
          <div class="card">
            <h2>âœ¨ Perk Management</h2>
            <div class="stats-grid" style="margin-bottom: 30px;">
              <div class="stat-box">
                <div class="stat-label">Available Perk Points</div>
                <div class="stat-value" id="perkPoints">0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Total XP</div>
                <div class="stat-value" id="totalXP">0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Active Perks</div>
                <div class="stat-value" id="activePerks">0</div>
              </div>
            </div>
            <div style="display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;">
              <button class="btn" onclick="app.refreshPerks()">ğŸ”„ Refresh Perks</button>
              <button class="btn btn-danger" onclick="app.respecPerks()" title="Costs 3000 XP"> ğŸ’€ Respec All Perks (-3000 XP) </button>
            </div>
          </div>
          <div class="card" id="venusCard" style="display: none;">
            <h2>ğŸ’• Venus Perk - Partnership System</h2>
            <div id="venusStatus" style="margin-bottom: 20px;">
              <div class="spinner"></div>
            </div>
          </div>
          <div class="card" id="artistCard" style="display: none;">
            <h2>ğŸ¨ Artist Perk - Forum Background</h2>
            <div style="margin-bottom: 20px;">
              <p style="color: #aaa; margin-bottom: 15px;">Set a custom background image for your forum profile</p>
              <input type="text" id="forumBackgroundUrl" placeholder="Enter image URL (max 256 characters)" class="input-field" style="width: 100%; margin-bottom: 15px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: #fff; padding: 12px 16px; font-size: 14px; transition: all 0.3s ease; outline: none;" 
                     onfocus="this.style.borderColor='#4CAF50'; this.style.background='rgba(0, 0, 0, 0.5)'" 
                     onblur="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.background='rgba(0, 0, 0, 0.3)'">
              <div style="display: flex; gap: 10px;">
                <button class="btn" onclick="app.setForumBackground()">ğŸ¨ Set Background</button>
                <button class="btn btn-secondary" onclick="app.clearForumBackground()">ğŸ—‘ï¸ Clear Background</button>
              </div>
              <div id="forumBackgroundStatus" style="margin-top: 15px;"></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ›’ Available Perks</h2>
            <div class="filter-controls">
              <input type="text" class="form-input" id="perkSearch" placeholder="Search perks..." onkeyup="app.filterPerks()" style="width: 300px;">
              <label style="color: #aaa; font-size: 14px;">Show:</label>
              <select class="form-select" id="perkFilter" style="width: 150px;" onchange="app.filterPerks()">
                <option value="all">All Perks</option>
                <option value="available">Available</option>
                <option value="owned">Owned</option>
                <option value="affordable">Affordable</option>
              </select>
            </div>
            <div class="scripts-grid" id="perksGrid">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Achievements Section -->
        <div class="content-section" id="achievements-section">
          <div class="card">
            <h2>ğŸ´ Achievements</h2>
            <div style="background: rgba(74, 158, 255, 0.1); padding: 25px; border-radius: 12px; margin-bottom: 30px; text-align: center;">
              <div style="font-size: 48px; font-weight: bold; color: #fff; margin-bottom: 10px;">
                <span id="unlockedAchievements" style="color: #4aff4a;">0</span>
                <span style="color: #666; font-size: 36px;">/</span>
                <span id="totalAchievements" style="color: #4a9eff;">0</span>
              </div>
              <div style="color: #888; font-size: 16px;">
                Achievements Unlocked
              </div>
              <div style="margin-top: 15px;">
                <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; height: 10px; overflow: hidden;">
                  <div id="achievementProgressBar" style="background: linear-gradient(to right, #4aff4a, #4a9eff); height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                </div>
                <div style="margin-top: 8px; color: #666; font-size: 14px;">
                  <span id="lockedAchievements">0</span> achievements remaining
                </div>
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h3 style="margin: 0; color: #4a9eff;">ğŸ´ Tarot Cards Collection</h3>
              <div class="filter-controls">
                <button class="btn btn-small" onclick="app.refreshAchievements()" style="margin-right: 10px;">
                  ğŸ”„ Refresh
                </button>
                <button class="btn btn-small" onclick="app.showRedeemAchievementsModal()" style="background: linear-gradient(135deg, #4aff4a, #2db92d);">
                  ğŸ Redeem Achievements
                </button>
              </div>
            </div>
            <div class="achievements-grid" id="achievementsGrid">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Quests Section -->
        <div class="content-section" id="quests-section">
          <div class="card">
            <h2>ğŸ¯ Quests</h2>
            <div class="quests-overview" style="margin-bottom: 30px;">
              <div class="stats-grid">
                <div class="stat-box">
                  <div class="stat-label">Daily Quests</div>
                  <div class="stat-value" id="dailyQuestCount">0/5</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">Weekly Quests</div>
                  <div class="stat-value" id="weeklyQuestCount">0/5</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">XP Available</div>
                  <div class="stat-value" style="color: #4aff4a;" id="questXPAvailable">0</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">Quests Completed</div>
                  <div class="stat-value" style="color: #4a9eff;" id="totalQuestsCompleted">0</div>
                </div>
              </div>
            </div>
            <div class="filter-controls" style="margin-bottom: 20px;">
              <label style="color: #aaa; font-size: 14px;">Filter:</label>
              <select class="form-select" id="questFilter" style="width: 150px;" onchange="app.filterQuests()">
                <option value="all">All Quests</option>
                <option value="daily">Daily Only</option>
                <option value="weekly">Weekly Only</option>
                <option value="active">Active</option>
                <option value="completed">Completed</option>
              </select>
              <button class="btn btn-small" onclick="app.refreshQuests()">ğŸ”„ Refresh</button>
            </div>
            <div class="quests-grid" id="questsGrid">
              <div class="spinner"></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ“œ Quest History</h2>
            <div id="questHistoryContainer">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Leaderboard Section -->
        <div class="content-section" id="divinity-section">
          <div class="card">
            <h2>ğŸ† Leaderboard</h2>
            <div class="stats-grid" style="margin-bottom: 30px;">
              <div class="stat-card">
                <h3>ğŸŒ¬ï¸ Air</h3>
                <div class="value" id="airTotal">0</div>
              </div>
              <div class="stat-card">
                <h3>ğŸ”¥ Fire</h3>
                <div class="value" id="fireTotal">0</div>
              </div>
              <div class="stat-card">
                <h3>ğŸ’§ Water</h3>
                <div class="value" id="waterTotal">0</div>
              </div>
              <div class="stat-card">
                <h3>ğŸŒ Earth</h3>
                <div class="value" id="earthTotal">0</div>
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
              <h3 style="margin: 0; color: #4a9eff;">ğŸ† Rankings</h3>
              <div class="filter-controls" style="flex-wrap: wrap;">
                <input type="text" class="search-input" id="divinitySearchInput" placeholder="Search by username..." style="width: 200px;">
                <select class="filter-dropdown" id="divinityRankFilter" onchange="app.filterDivinityMembers()">
                  <option value="">All Ranks</option>
                  <option value="Dust">ğŸŒ«ï¸ Dust</option>
                  <option value="Meteor">â˜„ï¸ Meteor</option>
                  <option value="Asteroid">ğŸª¨ Asteroid</option>
                  <option value="Comet">ğŸ’« Comet</option>
                  <option value="Moon">ğŸŒ™ Moon</option>
                  <option value="Planet">ğŸª Planet</option>
                  <option value="Star">â­ Star</option>
                  <option value="Nebula">ğŸŒŒ Nebula</option>
                  <option value="Cluster">âœ¨ Cluster</option>
                  <option value="Galaxy">ğŸŒ€ Galaxy</option>
                  <option value="Pulsar">ğŸ’  Pulsar</option>
                  <option value="Quasar">ğŸ”® Quasar</option>
                  <option value="Supernova">ğŸ’¥ Supernova</option>
                  <option value="Blackhole">ğŸ•³ï¸ Blackhole</option>
                  <option value="Wormhole">ğŸŒ€ Wormhole</option>
                  <option value="Universe">ğŸŒ Universe</option>
                  <option value="Multiverse">ğŸ† Multiverse</option>
                  <option value="Cosmos">ğŸŒŸ Cosmos</option>
                  <option value="Void">â¬› Void</option>
                  <option value="Zenith">ğŸ‘‘ Zenith</option>
                </select>
                <select class="filter-dropdown" id="divinitySignFilter">
                  <option value="">All Signs</option>
                  <option value="Aries">â™ˆ Aries</option>
                  <option value="Taurus">â™‰ Taurus</option>
                  <option value="Gemini">â™Š Gemini</option>
                  <option value="Cancer">â™‹ Cancer</option>
                  <option value="Leo">â™Œ Leo</option>
                  <option value="Virgo">â™ Virgo</option>
                  <option value="Libra">â™ Libra</option>
                  <option value="Scorpio">â™ Scorpio</option>
                  <option value="Sagittarius">â™ Sagittarius</option>
                  <option value="Capricorn">â™‘ Capricorn</option>
                  <option value="Aquarius">â™’ Aquarius</option>
                  <option value="Pisces">â™“ Pisces</option>
                </select>
              </div>
            </div>
            <div class="scripts-grid" id="divinityGrid">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
        <!-- Configuration Section -->
        <div class="content-section" id="config-section">
          <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
              <h2>ğŸ“ Script Configuration</h2>
              <button class="btn btn-small" id="syncConfigOptionsBtn" onclick="app.showConfigSyncModal()" style="display: none; background: rgba(74, 158, 255, 0.2);" title="Sync missing configuration options from enabled scripts">
                ğŸ”„ Sync Config Options
              </button>
            </div>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px;">
              <div style="flex: 1; display: flex; gap: 8px; align-items: center;">
                <select class="form-select" id="scriptConfigSelect" onchange="app.loadScriptConfig()" style="flex: 1;">
                  <option value="">Select a software first...</option>
                </select>
                <button class="btn btn-small" id="syncScriptBtn" onclick="app.syncSingleScript()" style="display: none; min-width: 32px; padding: 6px;" title="Sync this script's missing config options">
                  ğŸ”„
                </button>
                <button class="btn btn-small" id="resetScriptBtn" onclick="app.showResetScriptModal()" style="display: none; min-width: 32px; padding: 6px;" title="Reset or remove this script's configuration">
                  ğŸ—‘ï¸
                </button>
              </div>
              <select class="form-select" id="softwareSelect" onchange="app.onSoftwareChange()" style="width: 200px;">
                <option value="">Select software...</option>
              </select>
              <button class="btn btn-small" onclick="app.showPreviewUploadModal()" title="Upload Lua script for configuration preview">
                ğŸ§ª Preview
              </button>
              <button class="btn btn-small" onclick="app.clearPreview()" title="Clear preview script" style="display: none;" id="clearPreviewBtn">
                ğŸ—‘ï¸ Clear
              </button>
              <div style="display: flex; align-items: center; gap: 8px; margin-left: 10px;">
                <div class="toggle-switch" id="autoSaveToggle" onclick="app.toggleAutoSave()" title="Auto-save changes">
                  <div class="toggle-slider"></div>
                </div>
                <label style="color: #ccc; font-size: 14px; cursor: pointer; white-space: nowrap;" onclick="app.toggleAutoSave()">Auto-save</label>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; margin-left: 15px;" id="liveOmegaContainer">
                <div class="toggle-switch live-omega" id="liveOmegaToggle" onclick="app.toggleLiveOmega()" title="Live Omega updates">
                  <div class="toggle-slider"></div>
                </div>
                <label style="color: #ccc; font-size: 14px; cursor: pointer; white-space: nowrap;" onclick="app.toggleLiveOmega()">ğŸš€ Live Omega</label>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; margin-left: 15px;">
                <div class="toggle-switch" id="alphabeticalToggle" onclick="app.toggleAlphabeticalSort()" title="Sort settings alphabetically">
                  <div class="toggle-slider"></div>
                </div>
                <label style="color: #ccc; font-size: 14px; cursor: pointer; white-space: nowrap;" onclick="app.toggleAlphabeticalSort()">ğŸ”¤ A-Z Sort</label>
              </div>
            </div>
            <div id="scriptConfigEditor" style="display: none;">
              <div class="script-config-form" id="scriptConfigForm">
                <!-- Dynamic form fields will be inserted here -->
              </div>
              <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn" id="saveConfigBtn" onclick="app.saveScriptConfig()" style="position: relative;">
                  ğŸ’¾ Save Config
                  <div class="config-unsaved-badge" id="configUnsavedBadge"></div>
                </button>
                <button class="btn" onclick="app.saveScriptConfig(false, true)" style="background: linear-gradient(135deg, #4aff4a, #357abd);">ğŸš€ Save & Push to Omega</button>
                <button class="btn btn-danger" onclick="app.resetScriptConfig()">ğŸ—‘ï¸ Reset to Default</button>
              </div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ›ï¸ Configuration Management</h2>
            <div class="config-editor">
              <h3>Current Configuration (Raw JSON)</h3>
              <div class="json-editor" id="configDisplay" contenteditable="true">{}</div>
              <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn" onclick="app.saveConfiguration()">ğŸ’¾ Save Configuration</button>
                <button class="btn" onclick="app.saveConfiguration(true)" style="background: linear-gradient(135deg, #4aff4a, #357abd);">ğŸš€ Save & Push to Omega</button>
                <button class="btn" onclick="app.loadConfiguration()">ğŸ”„ Reload</button>
                <button class="btn" onclick="app.formatJSON()">ğŸ¨ Format JSON</button>
                <button class="btn btn-danger" onclick="app.resetConfiguration()">ğŸ—‘ï¸ Reset</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Cute Attribution Footer -->
    <div style="text-align: center; padding: 20px; color: #666; font-size: 12px; border-top: 1px solid rgba(255, 255, 255, 0.05); margin-top: 30px;">
      <span style="opacity: 0.7;">âœ¨ Lovingly crafted</span>
      <span style="color: #ff6b6b; font-size: 14px; margin: 0 3px;">â™¡</span>
      <span style="opacity: 0.7;">by</span>
      <a href="https://constelia.ai/forums/index.php?members/rucka.17146/" target="_blank" style="color: #4a9eff; font-weight: 600; margin-left: 4px; text-decoration: none; transition: all 0.2s;" onmouseover="this.style.color='#6bb6ff'; this.style.textDecoration='underline';" onmouseout="this.style.color='#4a9eff'; this.style.textDecoration='none';">Rucka</a>
      <span style="opacity: 0.5; margin-left: 8px;">â€¢ Dashboard v6.0.2</span>
    </div>
    <!-- Bottom-Right Notification Container -->
    <div class="notification-container" id="notificationContainer">
      <!-- Dynamic notifications will be inserted here -->
    </div>
    <!-- Roll Result Modal -->
    <div class="roll-result-modal" id="rollResultModal">
      <div class="roll-result-content">
        <div class="roll-result-title">ğŸ² Loot Roll Result</div>
        <div id="rollResultContent">
          <!-- Dynamic content will be inserted here -->
        </div>
        <button class="roll-close-btn" onclick="app.closeRollModal()">Got it!</button>
      </div>
    </div>
    <!-- Omega Download Modal -->
    <div class="omega-modal" id="omegaModal">
      <div class="omega-modal-content">
        <div class="omega-modal-title">ğŸ’¾ Download Omega</div>
        <div class="omega-modal-subtitle"> Choose your operating system to download the latest version of Omega. </div>
        <div class="omega-download-buttons">
          <button class="omega-download-btn windows" onclick="app.downloadOmega('windows')"> ğŸªŸ Windows <span style="font-size: 12px; opacity: 0.8;">(.bat file)</span>
          </button>
          <button class="omega-download-btn linux" onclick="app.downloadOmega('linux')"> ğŸ§ Linux <span style="font-size: 12px; opacity: 0.8;">(.sh file)</span>
          </button>
        </div>
        <button class="omega-close-btn" onclick="app.closeOmegaModal()">Cancel</button>
      </div>
    </div>
    <!-- Omega Verification Modal -->
    <div class="omega-modal" id="omegaVerificationModal">
      <div class="omega-modal-content">
        <div class="omega-modal-title">ğŸ” Verify License Key</div>
        <div class="omega-modal-subtitle">Please enter your Constelia API key to download Omega.</div>
        <div style="margin: 20px 0;">
          <input type="password" class="api-key-input" id="omegaVerificationKey" placeholder="Enter your Constelia API key..." style="width: 100%; margin-bottom: 15px;">
          <div style="display: flex; gap: 10px;">
            <button class="btn" onclick="app.verifyAndDownloadOmega()" style="flex: 1; background: linear-gradient(135deg, #4a9eff, #1e7bc9);">
              ğŸ”“ Verify & Continue
            </button>
            <button class="omega-close-btn" onclick="app.closeOmegaVerificationModal()" style="flex: 1;">Cancel</button>
          </div>
        </div>
        <div style="font-size: 12px; color: #888; text-align: center; margin-top: 15px;">
          Your license key will only be used for verification and will not be stored.
        </div>
      </div>
    </div>
    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
      <div class="settings-modal-content">
        <div class="settings-modal-header">
          <div class="settings-modal-title">âš™ï¸ System Settings</div>
          <button class="settings-modal-close" onclick="app.closeSettingsModal()">âœ•</button>
        </div>
        <div class="settings-modal-body">
          <!-- Protection Mode Section -->
          <div class="settings-section">
            <h3>ğŸ›¡ï¸ Protection Mode</h3>
            <div class="settings-field">
              <label class="settings-label">
                Constelia Protection Method 
                <code class="settings-tag">System</code>
              </label>
              <select class="form-select" id="settingsProtectionModeSelect" onchange="app.setProtectionMode()" style="width: 250px;">
                <option value="">Loading...</option>
              </select>
            </div>
            <p class="settings-description">
              Changes the FC2 protection method. Higher protection modes provide better security but may impact performance.
            </p>
          </div>
          <!-- Language Settings Section -->
          <div class="settings-section">
            <h3>ğŸŒ Language Settings</h3>
            <div class="settings-field">
              <label class="settings-label">
                Select Language 
                <code class="settings-tag">FL2</code>
              </label>
              <div style="display: flex; gap: 10px; align-items: center;">
                <select class="form-select" id="settingsLanguageSelect" onchange="app.setLanguage()" style="width: 200px;">
                  <option value="">Loading languages...</option>
                </select>
                <button class="btn btn-small" onclick="app.loadLanguages()" style="background: linear-gradient(135deg, #666, #555);">ğŸ”„ Refresh</button>
              </div>
            </div>
            <p class="settings-description">
              Changes the interface language for fantasy.language2 (FL2) supported applications. 
              <span id="settingsLanguageCount">Loading...</span> languages available. 
              Current: <span id="settingsCurrentLanguageDisplay">English</span>
            </p>
          </div>
          <!-- Caching Settings Section -->
          <div class="settings-section">
              <h3>ğŸ’¾ Caching Settings</h3>
              <div class="settings-field">
                  <label class="settings-label">
                      Enable Data Caching
                      <code class="settings-tag">Performance</code>
                  </label>
                  <div style="display: flex; align-items: center; gap: 15px;">
                      <div class="toggle-switch" id="cachingToggle" onclick="app.toggleCaching()" title="Enable/disable data caching">
                          <div class="toggle-slider"></div>
                      </div>
                      <span id="cachingStatus" style="color: #4aff4a; font-size: 14px;">Enabled</span>
                  </div>
              </div>
              <p class="settings-description">
                  When enabled, configuration metadata and other data will be cached to improve performance. 
                  When disabled, all data is fetched fresh from the API every time.
                  <br><br>
                  <strong>Note:</strong> Fresh data is always loaded when the page first loads, regardless of this setting.
              </p>
              <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
                  <button class="btn btn-small btn-danger" onclick="app.clearAllCaches()">
                      ğŸ—‘ï¸ Clear All Cache
                  </button>
                  <button class="btn btn-small" onclick="app.debugCacheContents()" style="background: linear-gradient(135deg, #666, #555);">
                      ğŸ” Debug Cache
                  </button>
              </div>
          </div>
          <!-- Tutorial Section -->
          <div class="settings-section">
              <h3>ğŸ“– Tutorial</h3>
              <div class="settings-field">
                  <label class="settings-label">
                      Dashboard Tutorial
                      <code class="settings-tag">Help</code>
                  </label>
                  <button class="btn" onclick="app.restartTutorialFromBeginning();" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                      ğŸš€ Start Tutorial
                  </button>
              </div>
              <p class="settings-description">
                  Launch the interactive tutorial that guides you through the dashboard features. The tutorial will walk you through logging in and using the main features of the dashboard.
              </p>
          </div>
        </div>
      </div>
    </div>
    <!-- Build Application Modal -->
    <div class="omega-modal" id="buildPreviewModal">
      <div class="omega-modal-content" style="max-width: 800px;">
        <div class="omega-modal-title">ğŸ—ï¸ Apply Build</div>
        <div class="omega-modal-subtitle" id="buildPreviewTitle"> Applying build will overwrite your current configuration and scripts </div>
        <div id="buildPreviewContent" style="max-height: 400px; overflow-y: auto; margin: 20px 0;">
          <!-- Dynamic content will be inserted here -->
        </div>
        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
          <button class="btn" onclick="app.confirmApplyBuild()" id="confirmApplyBtn"> ğŸš€ Apply Build </button>
          <button class="omega-close-btn" onclick="app.closeBuildPreview()">Cancel</button>
        </div>
      </div>
    </div>
    <!-- Build Details Modal -->
    <div class="script-editor-modal" id="buildDetailsModal" onclick="app.closeBuildDetails()">
      <div class="script-editor-content" onclick="event.stopPropagation()">
        <div class="script-editor-header">
          <div class="script-editor-title"> ğŸ” Build Details <span id="buildDetailsTitle">Loading...</span>
          </div>
          <div class="script-editor-actions">
            <button class="btn" onclick="app.applyBuildFromDetails()" id="applyFromDetailsBtn"> ğŸš€ Apply Build </button>
            <button class="script-editor-close" onclick="app.closeBuildDetails()"> âœ• </button>
          </div>
        </div>
        <div class="script-editor-body">
          <div class="script-editor-main" style="padding: 25px; overflow-y: auto;">
            <div id="buildDetailsContent">
              <!-- Dynamic content will be inserted here -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Script Editor Modal -->
    <div class="script-editor-modal" id="scriptEditorModal">
      <div class="script-editor-content">
        <div class="script-editor-loading" id="scriptEditorLoading">
          <div class="spinner"></div>
        </div>
        <div class="script-editor-header">
          <div class="script-editor-title"> âœï¸ Script Editor <div class="draft-indicator" id="draftIndicator">Draft saved</div>
          </div>
          <div class="script-editor-actions">
            <div class="save-indicator" id="saveIndicator"> ğŸ’¾ Saved </div>
            <button class="btn" onclick="app.saveScript()" id="saveScriptBtn"> ğŸ’¾ Save Script </button>
            <button class="script-editor-close" onclick="app.closeScriptEditor()"> âœ• Close </button>
          </div>
        </div>
        <div class="script-editor-body">
          <div class="script-editor-main">
            <div class="code-editor-container">
              <div class="code-editor-toolbar">
                <label style="color: #aaa; font-size: 14px;">Script Content:</label>
                <div style="flex: 1;"></div>
                <span style="color: #888; font-size: 12px;">Language: Lua</span>
              </div>
              <div class="code-editor hljs" id="scriptCodeEditor" contenteditable="true" data-language="lua">-- Enter your Lua script code here...
-- Example:
function onUpdate()
    -- Your code here
end</div>
            </div>
          </div>
          <div class="script-editor-sidebar">
            <!-- Script Info -->
            <div class="sidebar-section">
              <div class="script-info-display" id="scriptInfoDisplay">
                <h4>ğŸ“‹ Script Information</h4>
                <div class="script-info-item">
                  <span class="script-info-label">Name:</span>
                  <span class="script-info-value" id="scriptInfoName">Loading...</span>
                </div>
                <div class="script-info-item">
                  <span class="script-info-label">ID:</span>
                  <span class="script-info-value" id="scriptInfoId">-</span>
                </div>
                <div class="script-info-item">
                  <span class="script-info-label">Author:</span>
                  <span class="script-info-value" id="scriptInfoAuthor">-</span>
                </div>
                <div class="script-info-item">
                  <span class="script-info-label">Software:</span>
                  <span class="script-info-value" id="scriptInfoSoftware">-</span>
                </div>
                <div class="script-info-item">
                  <span class="script-info-label">Last Updated:</span>
                  <span class="script-info-value" id="scriptInfoUpdated">-</span>
                </div>
              </div>
            </div>
            <!-- Update Notes -->
            <div class="sidebar-section">
              <h3>ğŸ“ Update Notes</h3>
              <div class="form-group">
                <label for="updateNotes">Describe your changes (required):</label>
                <textarea id="updateNotes" placeholder="Please describe what you changed in this update. Be specific about new features, bug fixes, or improvements. This helps users understand what's new.

Examples:
- Fixed aim smoothing calculation
- Added new ESP options for better visibility
- Improved performance in crowded servers
- Updated for latest game version"></textarea>
                <div class="char-counter" id="notesCharCounter">0 / 5 minimum</div>
              </div>
            </div>
            <!-- Categories -->
            <div class="sidebar-section">
              <h3>ğŸ·ï¸ Categories</h3>
              <div class="categories-grid" id="categoriesGrid">
                <!-- Dynamic category checkboxes will be inserted here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Script Source Modal -->
    <div class="script-editor-modal" id="scriptSourceModal">
      <div class="script-editor-content">
        <div class="script-editor-loading" id="scriptSourceLoading">
          <div class="spinner"></div>
        </div>
        <div class="script-editor-header">
          <div class="script-editor-title">
            ğŸ“œ Script Source Code
            <span id="scriptSourceTitle">Loading...</span>
          </div>
          <div class="script-editor-actions">
            <button class="btn btn-small" onclick="app.copySourceToClipboard()" id="copySourceBtn">
              ğŸ“‹ Copy to Clipboard
            </button>
            <button class="script-editor-close" onclick="app.closeScriptSource()">
              âœ• Close
            </button>
          </div>
        </div>
        <div class="script-editor-body">
          <div class="script-editor-main" style="padding: 25px; overflow-y: auto;">
            <div style="margin-bottom: 15px;">
              <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                <div style="flex: 1;">
                  <div style="color: #4a9eff; font-weight: 600; margin-bottom: 5px;" id="sourceScriptName">Script Name</div>
                  <div style="color: #aaa; font-size: 14px;">
                    <span id="sourceScriptAuthor">Author</span> â€¢ 
                    <span id="sourceScriptSoftware">Software</span> â€¢ 
                    <span id="sourceScriptUpdated">Last Updated</span>
                  </div>
                </div>
                <div style="color: #888; font-size: 12px; font-family: 'Consolas', 'Monaco', monospace;" id="sourceScriptLines">
                  Lines: Loading...
                </div>
              </div>
            </div>
            <div style="background: #1e1e1e; border: 2px solid rgba(74, 158, 255, 0.3); border-radius: 12px; padding: 0; overflow: hidden;">
              <div style="background: #2d2d2d; padding: 12px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center;">
                <div style="color: #ccc; font-size: 14px; font-weight: 500;">Source Code</div>
                <div style="color: #888; font-size: 12px; font-family: 'Consolas', 'Monaco', monospace;">Lua</div>
              </div>
              <pre id="scriptSourceCode" style="margin: 0; padding: 20px; color: #f8f8f2; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 14px; line-height: 1.5; overflow: auto; max-height: 60vh; background: transparent; white-space: pre-wrap; word-wrap: break-word;"></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Achievement Detail Modal -->
    <div id="achievementModal" class="modal">
      <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
          <h2 id="achievementModalTitle">Achievement Details</h2>
          <button class="close-button" onclick="app.closeAchievementModal()">Ã—</button>
        </div>
        <div class="modal-body" style="text-align: center;">
          <img id="achievementImage" src="" alt="Achievement" style="max-width: 300px; margin: 20px auto; border-radius: 8px;">
          <h3 id="achievementName" style="color: #4a9eff; margin: 20px 0;"></h3>
          <p id="achievementDescription" style="color: #ccc; margin: 20px 0; line-height: 1.6;"></p>
          <div id="achievementStatus" style="margin: 20px 0;"></div>
        </div>
      </div>
    </div>
    
    <!-- Redeem Achievements Modal -->
    <div id="redeemAchievementsModal" class="modal">
      <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
          <h2>ğŸ Redeem Achievements</h2>
          <button class="close-button" onclick="app.closeRedeemAchievementsModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(255, 193, 7, 0.3);">
            <div style="color: #ffc107; font-weight: bold; margin-bottom: 10px;">âš ï¸ Important Notice</div>
            <p style="color: #ccc; margin: 0; line-height: 1.5;">
              This will redeem your achievements data. Make sure you have your achievements.dat file ready.
              Any inaccuracies in this process could lead to issues, so please ensure the content is exactly as it appears in the file.
            </p>
          </div>
          <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px; color: #4a9eff; font-weight: bold;">
              Paste your achievements.dat file content:
            </label>
            <textarea id="achievementsDataInput" style="width: 100%; height: 200px; background: #2d2d2d; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px; color: #fff; font-family: 'Consolas', monospace; resize: vertical;" placeholder="Paste the entire content of your achievements.dat file here..."></textarea>
          </div>
          <div style="text-align: right;">
            <button class="btn btn-danger" onclick="app.closeRedeemAchievementsModal()" style="margin-right: 10px;">Cancel</button>
            <button class="btn" onclick="app.redeemAchievements()" style="background: linear-gradient(135deg, #4aff4a, #2db92d);">ğŸ Redeem</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tutorial System -->
    <div class="tutorial-overlay" id="tutorialOverlay"></div>
    <div class="tutorial-highlight" id="tutorialHighlight"></div>
    <div class="tutorial-tooltip" id="tutorialTooltip">
      <h3 id="tutorialTitle">Welcome to Constelia Dashboard!</h3>
      <div id="tutorialContent">
        <p>This tutorial will guide you through the essential features.</p>
      </div>
      <div class="tutorial-nav">
        <button class="tutorial-btn tutorial-btn-skip" onclick="app.skipTutorial()">Skip Tutorial</button>
        <span class="tutorial-progress" id="tutorialProgress">Step 1 of 8</span>
        <button class="tutorial-btn tutorial-btn-next" onclick="app.nextTutorialStep()" id="tutorialNextBtn">Next</button>
      </div>
    </div>
    
    <!-- Script Preview Upload Modal -->
    <div id="previewUploadModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
          <h2>ğŸ§ª Script Configuration Preview</h2>
          <button class="close-button" onclick="app.closePreviewUploadModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <p style="color: #aaa; margin-bottom: 20px;">Upload a Lua script to preview how its configuration would look with enhanced metadata.</p>
          
          <div class="preview-upload-area" id="modalPreviewUploadArea" style="border: 2px dashed rgba(74, 158, 255, 0.3); border-radius: 12px; padding: 30px; text-align: center; background: rgba(74, 158, 255, 0.05); cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“</div>
            <div style="color: #4a9eff; font-weight: 600; margin-bottom: 5px;">Drop Lua file here or click to browse</div>
            <div style="color: #aaa; font-size: 14px;">Supports .lua files for configuration preview</div>
            <input type="file" id="modalPreviewFileInput" accept=".lua" style="display: none;" onchange="app.handleModalPreviewFileUpload(event)">
          </div>
          
          <div style="text-align: right; margin-top: 20px;">
            <button class="btn btn-small" onclick="app.closePreviewUploadModal()">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Config Sync Modal -->
    <div id="configSyncModal" class="modal">
      <div class="omega-modal-content" style="max-width: 600px;">
        <div class="omega-modal-header" style="background: rgba(26, 26, 46, 0.9); padding: 20px 30px; border-bottom: 2px solid rgba(74, 158, 255, 0.3); display: flex; justify-content: space-between; align-items: center; border-radius: 20px 20px 0 0;">
          <div class="omega-modal-title" style="color: #4a9eff; font-size: 1.5em; font-weight: 600;">ğŸ”„ Sync Configuration Options</div>
          <button class="settings-modal-close" onclick="app.closeConfigSyncModal()">Ã—</button>
        </div>
        <div class="omega-modal-body" style="padding: 30px;">
          <div class="omega-modal-subtitle" style="color: #aaa; margin-bottom: 30px; font-size: 16px; line-height: 1.5;">
            The following scripts have new configuration options that aren't in your current config. Select which scripts to update:
          </div>
          
          <div id="configSyncList" style="max-height: 300px; overflow-y: auto; margin-bottom: 30px;">
            <!-- Dynamic content will be inserted here -->
          </div>
          
          <div style="border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 20px; display: flex; justify-content: space-between; align-items: center; gap: 10px; flex-wrap: wrap;">
            <div style="display: flex; gap: 10px; align-items: center;">
              <button class="btn btn-small" onclick="app.selectAllConfigSync(true)" style="background: rgba(74, 158, 255, 0.2);">âœ“ Select All</button>
              <button class="btn btn-small" onclick="app.selectAllConfigSync(false)" style="background: rgba(255, 255, 255, 0.1);">âœ— Deselect All</button>
            </div>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-secondary" onclick="app.closeConfigSyncModal()">Cancel</button>
              <button class="btn" onclick="app.performConfigSync()" style="background: linear-gradient(135deg, #4aff4a, #357abd);" id="performSyncBtn">
                ğŸ”„ Sync Selected
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Venus Partnership Modal -->
    <div id="venusPartnershipModal" class="modal">
      <div class="omega-modal-content" style="max-width: 450px;">
        <div class="omega-modal-header" style="background: rgba(26, 26, 46, 0.9); padding: 20px 30px; border-bottom: 2px solid rgba(255, 105, 180, 0.3); display: flex; justify-content: space-between; align-items: center; border-radius: 20px 20px 0 0;">
          <div class="omega-modal-title" style="color: #ff69b4; font-size: 1.5em; font-weight: 600;">ğŸ’• Partnership Request</div>
          <button class="settings-modal-close" onclick="app.closeVenusPartnershipModal()">Ã—</button>
        </div>
        <div class="omega-modal-body" style="padding: 30px;">
          <div class="omega-modal-subtitle" style="color: #aaa; margin-bottom: 30px; font-size: 16px; line-height: 1.5;">
            Enter the username of the person you'd like to send a partnership request to:
          </div>
          
          <input type="text" id="venusPartnerInput" placeholder="Enter username..." style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: #fff; padding: 12px 16px; font-size: 14px; transition: all 0.3s ease; outline: none; margin-bottom: 30px;" 
                 onfocus="this.style.borderColor='#ff69b4'; this.style.background='rgba(0, 0, 0, 0.5)'" 
                 onblur="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.background='rgba(0, 0, 0, 0.3)'">
          
          <div style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="btn btn-secondary" onclick="app.closeVenusPartnershipModal()">Cancel</button>
            <button class="btn" onclick="app.submitVenusPartnership()" style="background: linear-gradient(135deg, #ff69b4, #ff1493);">
              ğŸ’• Send Request
            </button>
          </div>
        </div>
      </div>
    </div>
    
  </body>
</html>